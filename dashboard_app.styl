
flat-button(fg, bg)
  button
    color: fg
    &:focus
      outline: none
    background: linear-gradient(20deg, mix(fg, bg, 30%), bg 30%)
    &:hover
      background: linear-gradient(20deg, mix(fg, bg, 60%), bg 30%)
    &:active
      background: linear-gradient(45deg, bg, mix(fg, bg, 60%))

body
  background-color: #abc
  margin: 0

#app
  padding: 5px

// process listing
.procs
  font: 1em sans-serif
  margin: 0
  padding: 0
  .proc
    margin: 4px
    border: 3px solid #333
    border-radius: 12px
    display: inline-flex
    flex-direction: column
    &:hover
      border-color: #a55

// process headerline
.proc .header
  list-style-type: none
  position: relative
  display: inline-flex
  flat-button-b #006 #aac
  span
    padding: 5px
  :first-child
    border-radius: 8px 0 0 8px
  :last-child
    flex-grow: 1
    border-radius: 0 8px 8px 0
  button
    border: none

  button.stop:before { content: "✗" }
  button.restart:before { content: "↺" }
  button.start:before { content: "↗" }

  // flash
  &:after
    content: ' '
    border-radius: 8px
    position: absolute
    width: 100%
    height: 100%
    transition-duration: 1s
    pointer-events: none
    z-index: 2
  &.pending:after
    pointer-events: all
    @keyframes stripes
      0%   { box-shadow: #ccf 0px 0px 10px inset }
      50%  { box-shadow: #ccf 0px 0px 50px inset }
      100% { box-shadow: #ccf 0px 0px 10px inset }
    animation-iteration-count: infinite
    animation-name: stripes
    animation-duration: 1s
  &.success:after
    transition-duration: 0s
    background: #0c0
  &.failure:after
    transition-duration: 0s
    background: #c00

  span.pid
    color: #888
    background: #444
    &:before
      content: "PID"
      font-size: .5em
      vertical-align: middle
      padding-right: 2px
  .ports
    color: #444
    background: #888
    font: .9em monospace
    display: flex
    align-items: center
    .port
      padding: 0 2px
  span.loginfo
    color: #888
    background: #444
    font-size: .6em
    &:before
      position: relative
      top: 5px
      content: "ℹ "

// process status
.proc.running
  .header
    .name
      color: #060
      background: #aca
    flat-button #060 #aca
    button.start
      display: none
.proc.notrunning
  .header
    .name
      color: #660
      background: #cca
      &:after
        content: " ⚠"
    flat-button #660 #cca
    button.stop, span.pid
      display: none
.proc.stopped
  .header
    .name
      color: #600
      background: #caa
      &:after
        content: " ☠"
    flat-button #600 #caa
    button.start, span.pid
      display: none

// log
.proc .log
  position: relative // for correct offsetTop values
  max-height: 0
  max-width: 200px
  transition-duration: .1s
  overflow: auto
  display: grid
  .entry
    &:nth-child(2n)
      background: #cce
    &:nth-child(2n+1)
      background: #c4c4e0
    display: inline-flex
    // unread messages
    transition-delay: 1s
    transition-duration: 5s
    pre
      margin: 0
    &.unread
      background: #fce
    .date
      color: #e49
      &.s { background: #f99 }
      &.m { background: #faa }
      &.h { background: #fbb }
      &.d { background: #fcc }
      &.w { background: #fdd }
      &.o { background: #fee }
      &.y { background: #fee }
      user-select: none
      font-size: .8em
      letter-spacing: 2px
      min-width: 40px
      text-align: center

// expanding
.procs .proc.expand
  border-color: #d66
  .header
    :first-child
      border-radius: 8px 0 0 0
    :last-child
      border-radius: 0 8px 0 0
  .log
    border-radius: 0 0 8px 8px
    border: 3px solid #cce
    max-height: 300px
    max-width: 500px






// jsoneditor

.json-enum
  padding: 4px
  border-radius: 0 0 15px 15px

.json-string
  overflow: hidden
  width: 300px
  height: 300px
  max-width: 100%
  min-width: 100%
  max-height: 250px
  max-width: 250px
  padding: 4px
  resize: none
  white-space: pre
  border: none
  border-radius: 0 0 15px 15px
  &:focus
    overflow: auto
    max-width: calc(100%)
    max-height: calc(100%)
  &::placeholder
    color: #ddd

.json-array
  list-style: none
  padding-left: 10px
  display: flex
  flex-wrap: wrap
  li
    display: flex
    flex-direction: column
    padding: 4px
  button
    border-radius: 15px 15px 0 0
    width: 100%

.json-object
  display: inline-block;
  max-width: 100%;
  list-style: none
  padding: 0
  display: inline-flex
  flex-wrap: wrap
  *
    max-width: 100%;
  li
    margin: 5px
    max-width: calc(100% - 10px)
    padding: 0
    display: flex
    flex-direction: column
    align-items: center
    input
      min-width: 100%
      &.unset { color: #aaa }
      &.required { color: #008800 }
      &::placeholder { color: #ddd }
      &.set, &.added { color: #000 }
      &:placeholder-shown { background: #ffd }
      &.added { background: rgba(200, 200, 100, .2) }
      border-radius: 15px 15px 0 0
      padding: 4px
      font-size: .9em
      border: none
      width: 100%
      text-align: center
    & > :nth-child(2)
      background: rgba(66, 139, 192, .15)
      &.json-string
        background: #fff
      border-radius: 0 0 15px 15px
      width: 100%
