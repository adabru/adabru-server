
flat-button(fg, bg)
  button
    color: fg
    &:focus
      outline: none
    background: linear-gradient(20deg, mix(fg, bg, 30%), bg 30%)
    &:hover
      background: linear-gradient(20deg, mix(fg, bg, 60%), bg 30%)
    &:active
      background: linear-gradient(45deg, bg, mix(fg, bg, 60%))

body
  background-color: #cbc
  margin: 0

#app
  padding: 5px

// process listing
.procs
  font: 1em sans-serif
  margin: 0
  padding: 0
  .proc
    margin: 4px
    border: 3px solid #333
    border-radius: 12px
    display: inline-flex
    flex-direction: column
    &:hover
      border-color: #a55

// process headerline
.proc .header
  list-style-type: none
  position: relative
  display: inline-flex
  flat-button-b #006 #aac
  span
    padding: 5px
  :first-child
    border-radius: 8px 0 0 8px
  :last-child
    flex-grow: 1
    border-radius: 0 8px 8px 0
  button
    border: none

  button.stop:before { content: "✗" }
  button.restart:before { content: "↺" }
  button.start:before { content: "↗" }

  // flash
  &:after
    content: ' '
    border-radius: 8px
    position: absolute
    width: 100%
    height: 100%
    transition-duration: 1s
    pointer-events: none
    z-index: 2
  &.pending:after
    pointer-events: all
    @keyframes stripes
      0%   { box-shadow: #ccf 0px 0px 10px inset }
      50%  { box-shadow: #ccf 0px 0px 50px inset }
      100% { box-shadow: #ccf 0px 0px 10px inset }
    animation-iteration-count: infinite
    animation-name: stripes
    animation-duration: 1s
  &.success:after
    transition-duration: 0s
    background: #0c0
  &.failure:after
    transition-duration: 0s
    background: #c00

  span.pid
    color: #888
    background: #444
    &:before
      content: "PID"
      font-size: .5em
      vertical-align: middle
      padding-right: 2px
  .ports
    color: #444
    background: #888
    font: .9em monospace
    display: flex
    align-items: center
    .port
      padding: 0 2px
  span.loginfo
    color: #888
    background: #444
    font-size: .6em
    &:before
      position: relative
      top: 5px
      content: "ℹ "

// process status
.proc.running
  .header
    .name
      color: #060
      background: #aca
    flat-button #060 #aca
    button.start
      display: none
.proc.notrunning
  .header
    .name
      color: #660
      background: #cca
      &:after
        content: " ⚠"
    flat-button #660 #cca
    button.stop, span.pid
      display: none
.proc.stopped
  .header
    .name
      color: #600
      background: #caa
      &:after
        content: " ☠"
    flat-button #600 #caa
    button.start, span.pid
      display: none

// log
.proc .log
  position: relative // for correct offsetTop values
  overflow: auto
  display: grid
  .entry
    &:nth-child(2n)
      background: #cce
    &:nth-child(2n+1)
      background: #c4c4e0
    display: inline-flex
    // unread messages
    transition-delay: 1s
    transition-duration: 5s
    pre
      margin: 0
    &.unread
      background: #fce
    .date
      color: #e49
      &.s { background: #f99 }
      &.m { background: #faa }
      &.h { background: #fbb }
      &.d { background: #fcc }
      &.w { background: #fdd }
      &.o { background: #fee }
      &.y { background: #fee }
      user-select: none
      font-size: .8em
      letter-spacing: 2px
      min-width: 40px
      text-align: center

// config
.proc .config
  overflow: hidden

// expanding
.procs .proc
  & .log, .config
    max-height: 0
    max-width: 200px
    transition-duration: .1s
  &.expand
    border-color: #d66
    .header
      :first-child { border-radius: 8px 0 0 0 }
      :last-child { border-radius: 0 8px 0 0 }
    .log
      border: 3px solid #cce
      max-height: 300px
      max-width: 500px
    .config
      max-height: none
      max-width: 500px
    :last-child { border-radius: 0 0 8px 8px }






// jsoneditor

.json-stem
  display: flex
  & > button
    background: #c6f3
    &:hover { background: #c6f6 }
    font-size: .5em
    height: 3em
    &:nth-child(1) { border-radius: 0 0 0 15px }
    // 1px for shadow issue
    &:nth-child(2) { border-radius: 0 0 0 1px }
    &:nth-child(3) { border-radius: 0 0 15px 0 }

.json-string
  overflow: hidden
  width: 300px
  height: 300px
  max-width: 100%
  min-width: 100%
  max-height: 250px
  max-width: 250px
  padding: 4px
  resize: none
  white-space: pre
  border: none
  border-radius: 0 0 15px 15px
  &:focus
    overflow: auto
    max-width: calc(100%)
    max-height: calc(100%)
  &::placeholder
    color: #ddd

.json-array
  background: #8854
  padding: 8px
  box-sizing: border-box
  display: flex
  flex-wrap: wrap
  list-style: none
  > li
    display: flex
    flex-direction: column
    margin: 1px 1px
    & > button
      border-radius: 15px 15px 0 0
      border-style: groove
      border-width: 1px
      width: 100%
      height: 1.5em
      background: #c6f6
      &:hover { background: #f386 }
    & > button:last-child
      background: #c6f2
      &:hover { background: #afd6 }
    & > :nth-child(2)
      border-radius: 0 0 15px 15px
      width: 100%


.json-object
  background: #8854
  padding: 8px
  box-sizing: border-box
  display: inline-flex
  flex-wrap: wrap
  max-width: 100%
  list-style: none
  > *
    max-width: 100%;
  > li
    margin: 3px 5px
    max-width: calc(100% - 10px)
    padding: 0
    display: flex
    flex-direction: column
    align-items: center
    input
      min-width: 100%
      background: #c6f6
      &:last-child { background: #c6f4 }
      &:last-child:hover { background: #c6f6 }
      border-radius: 15px 15px 0 0
      padding: 4px
      font-size: .9em
      border: none
      width: 100%
      text-align: center
    & > :nth-child(2)
      border-radius: 0 0 15px 15px
      width: 100%
